(this.webpackJsonpblog=this.webpackJsonpblog||[]).push([[0],{214:function(e,t,n){e.exports=n(367)},222:function(e,t,n){},227:function(e,t){},229:function(e,t){},244:function(e,t){},246:function(e,t){},274:function(e,t){},276:function(e,t){},277:function(e,t){},282:function(e,t){},284:function(e,t){},291:function(e,t){},293:function(e,t){},311:function(e,t){},313:function(e,t){},325:function(e,t){},328:function(e,t){},367:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(87),o=n.n(c),i=n(8),l=n(371),u=n(208),s=(n(222),n(7)),f=n(31),m=n(32),d=n(34),p=n(33),b=n(18),E=n(89),h=function(e){return e.article},v=function(e){return e.articles.loading},O=Object(E.a)((function(e){return e.articles.byId}),(function(e){return e.articles.allIds}),(function(e,t){return t.map((function(t){return e[t]}))})),y=n(41),j=n(2),g=n(21),_=n.n(g),S=n(45),R=n(50),w=n.n(R),C=n(91),T=n.n(C),k=T.a.create({baseURL:"http://localhost:8080",timeout:3e3,headers:{"Content-Type":"application/json"}}),I=function(){return{type:"GET_ARTICLES"}},L=function(e){return{type:"GET_ARTICLES_SUCCESS",payload:e}},N=function(e){return{type:"GET_ARTICLES_ERROR",payload:e}},x=function(){return{type:"ADD_ARTICLE"}},A=function(e){return{type:"ADD_ARTICLE_SUCCESS",payload:e}},D=function(e){return{type:"ADD_ARTICLE_ERROR",payload:e}},U=function(){return{type:"EDIT_ARTICLE"}},G=function(e){return{type:"EDIT_ARTICLE_SUCCESS",payload:e}},P=function(e){return{type:"EDIT_ARTICLE_ERROR",payload:e}},M=function(){return{type:"GET_ARTICLE"}},F=function(e){return{type:"GET_ARTICLE_SUCCESS",payload:e}},H=function(e){return{type:"GET_ARTICLE_ERROR",payload:e}},W=n(35),V=function(e){return e.users.isLoggedIn},q=function(e){return e.users.userProfile.username},B=function(e){return e.users.userProfile},Y=function(e){return e.users.loading},X=Object(E.a)((function(e){return e.users.users.byId}),(function(e){return e.users.users.allIds}),(function(e,t){return t.map((function(t){return e[t]}))})),J=n(51),z=function(e){var t=e.article,n=t.id,a=t.title,c=t.date,o=t.abstract;return r.a.createElement("li",{className:"article-list-item"},r.a.createElement(J.a,{className:"article-list-item__link",to:{pathname:"/article/".concat(n)}},r.a.createElement("div",{className:"article-list-item__header"},r.a.createElement("div",{className:"article-list-item__title"},a),r.a.createElement("div",{className:"article-list-item__date"},c)),r.a.createElement("div",{className:"article-list-item__abstract"},o)))},$=n(42),K=function(){return r.a.createElement("div",{className:"spinner"})},Q=function(e){return function(t){var n=t.isLoading,a=Object($.a)(t,["isLoading"]);return!0===n?r.a.createElement(K,null):r.a.createElement(e,a)}};var Z=function(e){Object(d.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(b.a)(e);if(t()){var r=Object(b.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(p.a)(this,n)}}(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,c=new Array(a),o=0;o<a;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).listArticles=function(){return e.props.articles.map((function(e){return r.a.createElement(z,{key:e.id,article:e})}))},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props,t=e.userName,n=e.isLoggedIn;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("h1",{className:"title"},"Hello ".concat(t||"User","!")),r.a.createElement("ul",{className:"article-list"},this.listArticles()))}}]),n}(a.PureComponent),ee=Object(W.d)(Q,Object(i.b)((function(e){return{userName:q(e),isLoggedIn:V(e)}})))(Z),te=n(22);var ne=function(e){Object(d.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(b.a)(e);if(t()){var r=Object(b.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(p.a)(this,n)}}(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(m.a)(n,[{key:"componentDidCatch",value:function(e,t){console.error(e,t),Object(te.a)(e,{extra:t})}},{key:"render",value:function(){return this.state.hasError?r.a.createElement("div",{className:"error-wrapper"},r.a.createElement("h1",{className:"title"},"Something went wrong")):this.props.children}}],[{key:"getDerivedStateFromError",value:function(){return{hasError:!0}}}]),n}(a.Component),ae=n(372);var re=function(e){Object(d.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(b.a)(e);if(t()){var r=Object(b.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(p.a)(this,n)}}(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={timestamp:Date.now()},e.t=null,e}return Object(m.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.t=setInterval((function(){return e.setState({timestamp:Date.now()})}),1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.t)}},{key:"render",value:function(){var e=Object(ae.a)(this.state.timestamp,"H:mm:ss");return r.a.createElement("div",{className:"clock"},e)}}]),n}(a.Component);var ce=function(e){Object(d.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(b.a)(e);if(t()){var r=Object(b.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(p.a)(this,n)}}(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(m.a)(n,[{key:"componentDidMount",value:function(){this.props.fetchArticles()}},{key:"render",value:function(){var e=this.props,t=e.articles,n=e.isLoading;return r.a.createElement(ne,null,r.a.createElement(ee,{articles:t,isLoading:n}),r.a.createElement(re,null))}}]),n}(a.Component),oe={fetchArticles:function(){return function(){var e=Object(S.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(I()),e.next=4,k.get("/articles");case 4:n=e.sent,t(L(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(N(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}},ie=Object(i.b)((function(e){return{articles:O(e),isLoading:v(e)}}),oe)(ce);function le(e){return e.commentList.map((function(e){var t=e.id,n=e.title,a=e.text;return r.a.createElement("div",{className:"comment__wrapper",key:t},r.a.createElement("h3",null,n),r.a.createElement("p",null,a))}))}var ue="ADMIN",se="USER";function fe(e){var t=e.render,n=Object(a.useState)({x:0,y:0}),c=Object(y.a)(n,2),o=c[0],i=c[1],l=Object(a.useRef)(null),u=Object(a.useCallback)((function(e){e.persist();var t=l.current.getBoundingClientRect(),n=t.left,a=t.top;i({x:e.clientX-n,y:e.clientY-a})}),[]);return r.a.createElement("div",{onMouseMove:u,ref:l},t(o))}var me=function(e){var t=Object(i.c)(),n=Object(i.d)(h),c=Object(i.d)(B),o=n.isLoading,l=n.article,u=e.match.params.id,s=c.id===(null===l||void 0===l?void 0:l.userId)||c.role===ue,f=Object(a.useMemo)((function(){return T.a.CancelToken.source()}),[]);Object(a.useEffect)((function(){return t(function(e,t){return function(n){n(M());var a=k.get("/articles/".concat(e),{cancelToken:t}),r=k.get("/articles/".concat(e,"/comments"),{cancelToken:t});Promise.all([a,r]).then((function(e){var t=Object(y.a)(e,2),a=t[0],r=t[1],c=Object(j.a)(Object(j.a)({},a.data),{},{comments:r.data});n(F(c))})).catch((function(e){n(H(e))}))}}(u,f.token)),function(){f.cancel()}}),[t,u,f]);var m=Object(a.useCallback)((function(){e.history.push("/article/edit/".concat(u))}),[u,e.history]);return o||!l?r.a.createElement(K,null):r.a.createElement(ne,null,r.a.createElement(fe,{render:function(e){var t=e.x,n=e.y;return r.a.createElement("article",{className:"article"},r.a.createElement("div",{className:"article__buttons"},s&&r.a.createElement("button",{className:"button --primary",onClick:m},"Edit article")),r.a.createElement("header",{className:"article__title"},l.title),r.a.createElement("section",{className:"article__content"},l.text),r.a.createElement("footer",{className:"article__footer"},"Created: ",l.date),r.a.createElement(le,{commentList:l.comments}),r.a.createElement("div",null,"Mouse position: ",t,", ",n))}}))},de=n(24),pe=Object(de.a)(),be=function(){return{type:"AUTHENTICATE"}},Ee=function(e){return{type:"AUTHENTICATE_SUCCESS",payload:e}},he=function(e){return{type:"AUTHENTICATE_ERROR",payload:e}},ve=function(){return{type:"GET_USER_PROFILE"}},Oe=function(e){return{type:"GET_USER_PROFILE_SUCCESS",payload:e}},ye=function(e){return{type:"SET_LOGGED_IN",payload:e}},je=function(){return{type:"GET_USER_LIST"}},ge=function(e){return{type:"GET_USER_LIST_SUCCESS",payload:e}},_e=function(e){return{type:"GET_USER_LIST_ERROR",payload:e}};function Se(){var e=Object(i.c)(),t=Object(a.useCallback)((function(){localStorage.removeItem("token"),localStorage.removeItem("auth_method"),e(ye(!1))}),[e]);return r.a.createElement("button",{className:"navbar__link",onClick:t},"Logout")}var Re=r.a.createContext();function we(e){var t=e.children,n=Object(a.useState)(window.navigator.onLine),c=Object(y.a)(n,2),o=c[0],i=c[1];return Object(a.useEffect)((function(){return window.addEventListener("online",(function(){return i(!0)})),window.addEventListener("offline",(function(){return i(!1)})),function(){window.removeEventListener("online",(function(){return i(!0)})),window.removeEventListener("offline",(function(){return i(!1)}))}}),[]),r.a.createElement(Re.Provider,{value:{isOnline:o}},t)}var Ce=function(){var e=Object(a.useContext)(Re).isOnline,t=Object(i.d)(V),n=Object(i.d)(B),c=t&&n.role===ue;return r.a.createElement("nav",{className:"navbar"},r.a.createElement("div",{className:"menu"},r.a.createElement(J.a,{className:"navbar__link",to:{pathname:"/"}},"Home page"),t&&e&&r.a.createElement(J.a,{className:"navbar__link",to:{pathname:"/article/new"}},"New article"),c&&r.a.createElement(J.a,{className:"navbar__link",to:{pathname:"/users"}},"Users")),r.a.createElement("div",{className:"menu"},t?r.a.createElement(Se,null):r.a.createElement(r.a.Fragment,null,r.a.createElement(J.a,{className:"navbar__link",to:{pathname:"/login"}},"Login"),r.a.createElement(J.a,{className:"navbar__link",to:{pathname:"/register"}},"Register"))))},Te=n(67),ke=n(19),Ie=n(76),Le=n.n(Ie),Ne=function(e){var t=e.type,n=e.children,a=Le()("text-field__message",{"text-field__message--error":"error"===t});return r.a.createElement("span",{className:a},n)},xe=function(e){var t=e.field,n=t.name,a=Object($.a)(t,["name"]),c=e.form,o=c.touched,i=c.errors,l=e.placeholder,u=e.rows,s=Object($.a)(e,["field","form","placeholder","rows"]),f=i[n],m=o[n],d=Le()("text-field__input",{"text-field__input--error":!!f&&m});return r.a.createElement("div",{className:"text-field"},u?r.a.createElement("textarea",Object.assign({id:n,type:"text",className:d,placeholder:l,rows:u},s,a)):r.a.createElement("input",Object.assign({id:n,className:d,placeholder:l},s,a)),m&&f&&r.a.createElement(Ne,{type:"error"},f))},Ae=r.a.createContext({message:"",isOpen:!1,showSnackbar:function(){},status:"success"});function De(e){var t=e.disabled,n=e.onClick,c=e.children,o=e.type,i=void 0===o?"button":o,l=Object(a.useContext)(Ae).showSnackbar,u=Object(a.useContext)(Re).isOnline,s=Object(a.useCallback)((function(){u?n():l("You are offline. You cannot perform this action","error")}),[u,n,l]);return r.a.createElement("button",{type:i,onClick:s,disabled:t,className:"button --primary"},c)}var Ue={title:"",abstract:"",text:""},Ge=function(e){return["title","abstract","text"].reduce((function(t,n){return e[n]||(t[n]="Required"),t}),{})},Pe=function(e){Object(d.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(b.a)(e);if(t()){var r=Object(b.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(p.a)(this,n)}}(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).submit=function(t,n){var a=n.resetForm,r=!!e.props.article,c=Object(j.a)(Object(j.a)({},t),{},{id:r?e.props.article.id:Date.now().apply(void 0,Object(Te.a)(!r&&{date:Object(ae.a)(new Date,"MMMM d, yyyy H:mm:ss")}))});r?(e.props.updateArticle(c,e.props.history),e.context.showSnackbar("The article was updated successfully","success")):(e.props.createArticle(c,e.props.history),e.context.showSnackbar("The article was published successfully","success")),a()},e}return Object(m.a)(n,[{key:"render",value:function(){return r.a.createElement(a.Fragment,null,r.a.createElement("h1",{className:"form__title"},this.props.title||""),r.a.createElement(ke.c,{initialValues:this.props.article||Ue,onSubmit:this.submit,validate:Ge,render:function(e){var t=e.isSubmitting,n=e.handleSubmit;return r.a.createElement("div",{className:"form"},r.a.createElement(ke.a,{name:"title",placeholder:"Title",component:xe}),r.a.createElement(ke.a,{name:"abstract",placeholder:"Abstract",component:xe}),r.a.createElement(ke.a,{name:"text",placeholder:"Text",rows:15,component:xe}),r.a.createElement(De,{type:"submit",disabled:t,onClick:n},"Submit"))}}))}}]),n}(a.Component);Pe.contextType=Ae;var Me={createArticle:function(e,t){return function(){var n=Object(S.a)(_.a.mark((function n(a){var r,c,o,i;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(x()),r=localStorage.getItem("token"),c=w.a.decode(r),o=c.sub,n.next=6,k.post("/articles",Object(j.a)(Object(j.a)({},e),{},{userId:o}));case 6:i=n.sent,a(A(i.data)),t.push("/article/".concat(i.data.id)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a(D(n.t0));case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()},updateArticle:function(e,t){return function(){var n=Object(S.a)(_.a.mark((function n(a){var r;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a(U()),n.next=4,k.put("/articles/".concat(e.id),e);case 4:r=n.sent,a(G(r.data)),t.push("/article/".concat(r.data.id)),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),a(P(n.t0));case 12:case"end":return n.stop()}}),n,null,[[0,9]])})));return function(e){return n.apply(this,arguments)}}()}},Fe=Object(W.d)(Object(i.b)(null,Me),s.g)(Pe),He=function(){return r.a.createElement(ne,null,r.a.createElement(Fe,{title:"New article"}))},We=function(){var e=Object(i.d)(h),t=e.isLoading,n=e.article;return t||!n?r.a.createElement(K,null):r.a.createElement(ne,null,r.a.createElement(Fe,{title:"Edit article",article:n}))},Ve=function(e){return Le()("snackbar",{"snackbar--error":"error"===e},{"snackbar--success":"success"===e})},qe=function(){return r.a.createElement(Ae.Consumer,null,(function(e){var t=e.isOpen,n=e.message,a=e.status;return t&&r.a.createElement("div",{className:Ve(a)},n)}))};var Be=function(e){Object(d.a)(n,e);var t=function(e){function t(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}return function(){var n,a=Object(b.a)(e);if(t()){var r=Object(b.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(p.a)(this,n)}}(n);function n(){var e;Object(f.a)(this,n);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).showSnackbar=function(t,n){e.setState({message:t,status:n,isOpen:!0}),setTimeout((function(){return e.setState({isOpen:!1})}),3e3)},e.state={isOpen:!1,message:"",status:"success",showSnackbar:e.showSnackbar},e}return Object(m.a)(n,[{key:"render",value:function(){var e=this.props.children;return r.a.createElement(Ae.Provider,{value:this.state},r.a.createElement(qe,null),e)}}]),n}(a.Component),Ye=function(e){return e.children},Xe=function(e){var t=e.children,n=e.initialValues,c=void 0===n?{}:n,o=e.onSubmit,i=Object(a.useState)(0),l=Object(y.a)(i,2),u=l[0],s=l[1],f=Object(a.useState)(c),m=Object(y.a)(f,2),d=m[0],p=m[1],b=function(){return s(Math.max(u-1,0))},E=r.a.Children.toArray(t)[u],h=u===r.a.Children.count(t)-1;return r.a.createElement(ke.c,{initialValues:d,enableReinitialize:!1,validate:function(e){var n=r.a.Children.toArray(t)[u];return n.props.validate?n.props.validate(e):{}},onSubmit:function(e,n){if(u===r.a.Children.count(t)-1)return o(e,n);n.setTouched({}),n.setSubmitting(!1),function(e){s(Math.min(u+1,t.length-1)),p(e)}(e)}},(function(e){var t=e.isSubmitting;return r.a.createElement(ke.b,{className:"form"},E,r.a.createElement("div",{className:"form__buttons"},u>0&&r.a.createElement("button",{type:"button",className:"button --secondary",onClick:b},"Previous"),!h&&r.a.createElement("button",{type:"submit",className:"button --primary"},"Next"),h&&r.a.createElement("button",{type:"submit",disabled:t,className:"button --primary"},"Submit")))}))},Je=function(e){var t={};(e.email||(t.email="Required"),e.password||(t.password="Required"),e.email)&&(new RegExp("[\\w-]+@([\\w-]+\\.)+[\\w-]+").test(e.email)||(t.email="Invalid email"));return t},ze=function(){var e=Object(i.c)(),t=Object(a.useCallback)((function(t){var n;e((n=t,function(){var e=Object(S.a)(_.a.mark((function e(t){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(be()),e.next=4,k.post("/register",n);case 4:r=e.sent,localStorage.setItem("token",null===(a=r.data)||void 0===a?void 0:a.accessToken),localStorage.setItem("auth_method","local"),pe.push("/"),t(Ee(n)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t(he(e.t0));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()))}),[e]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",{className:"title"},"Register"),r.a.createElement(Xe,{initialValues:{email:"",password:"",username:"",about:""},onSubmit:t},r.a.createElement(Ye,{validate:Je},r.a.createElement(ke.a,{name:"email",placeholder:"Email",component:xe}),r.a.createElement(ke.a,{name:"password",placeholder:"Password",type:"password",component:xe})),r.a.createElement(Ye,{validate:Je},r.a.createElement(ke.a,{name:"username",placeholder:"Your username",component:xe}),r.a.createElement(ke.a,{name:"about",placeholder:"Write something about yourself",component:xe,rows:10}))))},$e=n(205),Ke=n.n($e),Qe={email:"",password:""};function Ze(){var e=Object(i.c)(),t=Object(a.useContext)(Ae).showSnackbar,n=Object(a.useCallback)((function(t){var n;e((n=t,function(){var e=Object(S.a)(_.a.mark((function e(t){var a,r,c,o,i,l;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(be()),e.next=4,k.post("/login",n);case 4:return r=e.sent,c=null===(a=r.data)||void 0===a?void 0:a.accessToken,o=w.a.decode(c),i=o.sub,localStorage.setItem("token",c),localStorage.setItem("auth_method","local"),e.next=11,k.get("/users/".concat(i));case 11:l=e.sent,pe.push("/"),t(Ee(l.data)),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(0),console.log(e.t0),t(he(e.t0));case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(t){return e.apply(this,arguments)}}()))}),[e]),c=Object(a.useCallback)((function(t){localStorage.setItem("token",t.tokenId),localStorage.setItem("auth_method","google"),e(ye(!0)),e({type:"SET_USER_NAME",payload:t.profileObj.name})}),[e]),o=Object(a.useCallback)((function(){t("Login with Google failed","error")}),[t]);return r.a.createElement("div",{className:"login-page"},r.a.createElement("h1",{className:"title"},"Login"),r.a.createElement(ke.c,{initialValues:Qe,onSubmit:n,render:function(e){var t=e.isSubmitting;return r.a.createElement(ke.b,{className:"form"},r.a.createElement(ke.a,{name:"email",placeholder:"Email",component:xe}),r.a.createElement(ke.a,{name:"password",placeholder:"Password",type:"password",component:xe}),r.a.createElement("button",{type:"submit",disabled:t,className:"button --primary"},"Login"),r.a.createElement(Ke.a,{clientId:"418771507626-lab2i3upktqibr6g9hmm9d93cjj0s3s7.apps.googleusercontent.com",render:function(e){return r.a.createElement("button",Object.assign({className:"button --secondary"},e),"Login with Google")},buttonText:"Login with Google",onSuccess:c,onFailure:o,cookiePolicy:"single_host_origin",scope:"profile"}))}}))}function et(){var e=Object(i.c)(),t=Object(i.d)(Y),n=Object(i.d)(X);return Object(a.useEffect)((function(){e(function(){var e=Object(S.a)(_.a.mark((function e(t){var n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(je()),e.next=4,k.get("/users");case 4:n=e.sent,t(ge(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t(_e(e.t0));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),t?r.a.createElement(K,null):r.a.createElement(ne,null,r.a.createElement("h1",{className:"title"},"User Data"),r.a.createElement("table",null,r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Username"),r.a.createElement("th",null,"Email"),r.a.createElement("th",null,"Role"),r.a.createElement("th",null,"Additional information"))),r.a.createElement("tbody",null,n.map((function(e){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.username),r.a.createElement("td",null,e.email),r.a.createElement("td",null,e.role),r.a.createElement("td",null,e.about))})))))}function tt(e){var t=e.children,n=e.roles,c=Object($.a)(e,["children","roles"]),o=Object(i.d)(B),l=Object(i.d)(V),u=Object(a.useMemo)((function(){return n?l&&n.includes(o.role):l}),[l,n,o]),f=l?"/login":"/";return r.a.createElement(s.b,c,u?t:r.a.createElement(s.a,{to:f}))}function nt(e){var t=e.children,n=Object($.a)(e,["children"]),a=Object(i.d)(V);return r.a.createElement(s.b,n,a?r.a.createElement(s.a,{to:"/"}):t)}var at=function(){var e=ue,t=se;return r.a.createElement(Be,null,r.a.createElement(we,null,r.a.createElement(s.c,{history:pe},r.a.createElement(Ce,null),r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:ie}),r.a.createElement(tt,{path:"/users",component:et,roles:[e]}),r.a.createElement(tt,{path:"/article/new",component:He,roles:[e,t]}),r.a.createElement(tt,{path:"/article/edit/:id",component:We,roles:[e,t]}),r.a.createElement(s.b,{path:"/article/:id",component:me}),r.a.createElement(nt,{path:"/register",component:ze}),r.a.createElement(nt,{path:"/login",component:Ze})))))},rt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ct(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var ot=n(206),it=n(66),lt={byId:{},allIds:[],loading:!1,error:null},ut=function(e){return e.reduce((function(e,t){var n=st(e,t);return Object(j.a)(Object(j.a)({},n),{},{loading:!1,error:null})}),lt)},st=function(e,t){return Object(j.a)(Object(j.a)({},e),{},{byId:Object(j.a)(Object(j.a)({},e.byId),{},Object(it.a)({},t.id,t)),allIds:[].concat(Object(Te.a)(e.allIds),[t.id])})};var ft={isLoggedIn:!1,loading:!1,error:null,userProfile:{},users:{byId:{},allIds:[]}},mt=function(e){return e.reduce((function(e,t){var n=dt(e,t);return Object(j.a)({},n)}),ft.users)},dt=function(e,t){return Object(j.a)(Object(j.a)({},e),{},{byId:Object(j.a)(Object(j.a)({},e.byId),{},Object(it.a)({},t.id,t)),allIds:[].concat(Object(Te.a)(e.allIds),[t.id])})};var pt={article:null,isLoading:!1,error:null};var bt=Object(W.c)({articles:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ARTICLES":case"ADD_ARTICLE":return Object(j.a)(Object(j.a)({},e),{},{loading:!0});case"GET_ARTICLES_SUCCESS":return ut(t.payload);case"ADD_ARTICLE_SUCCESS":var n=st(e,t.payload);return Object(j.a)(Object(j.a)({},n),{},{loading:!1,error:null});case"GET_ARTICLES_ERROR":case"ADD_ARTICLE_ERROR":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:t.payload});default:return e}},users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTHENTICATE":case"GET_USER_LIST":return Object(j.a)(Object(j.a)({},e),{},{loading:!0,error:null});case"AUTHENTICATE_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{isLoggedIn:!0,loading:!1,userProfile:Object(j.a)(Object(j.a)({},e.userProfile),t.payload)});case"GET_USER_LIST_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:null,users:mt(t.payload)});case"AUTHENTICATE_ERROR":case"GET_USER_LIST_ERROR":return Object(j.a)(Object(j.a)({},e),{},{loading:!1,error:t.payload});case"GET_USER_PROFILE":return Object(j.a)(Object(j.a)({},e),{},{error:null});case"GET_USER_PROFILE_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{userProfile:t.payload});case"SET_LOGGED_IN":return Object(j.a)(Object(j.a)({},e),{},{isLoggedIn:t.payload});case"SET_USER_NAME":return Object(j.a)(Object(j.a)({},e),{},{userProfile:Object(j.a)(Object(j.a)({},e.userProfile),{},{username:t.payload})});default:return e}},article:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ARTICLE":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0,error:null});case"GET_ARTICLE_SUCCESS":return Object(j.a)(Object(j.a)({},e),{},{article:t.payload,isLoading:!1});case"GET_ARTICLE_ERROR":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!1,error:t.payload});default:return e}}}),Et=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||W.d;function ht(e){var t=e.children,n=Object(i.c)();return Object(a.useEffect)((function(){var e=localStorage.getItem("token"),t=localStorage.getItem("auth_method"),a=!1;if(e){if(1e3*w.a.decode(e).exp<Date.now())return void localStorage.removeItem("token");a=!0,n(function(e,t){return function(){var n=Object(S.a)(_.a.mark((function n(a){var r,c,o,i,l,u;return _.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,a(ve()),r={},"google"!==t){n.next=8;break}c=w.a.decode(e),o=c.name,r={username:o},n.next=13;break;case 8:return i=w.a.decode(e),l=i.sub,n.next=11,k.get("/users/".concat(l));case 11:u=n.sent,r=u.data;case 13:a(Oe(r)),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(0),console.log(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,16]])})));return function(e){return n.apply(this,arguments)}}()}(e,t))}n(ye(a))}),[n]),t}l.a({release:"1.0",dsn:"https://c1beb1018e7d4d47a39906aa6b4c01fc@o512694.ingest.sentry.io/5613383",integrations:[new u.a.BrowserTracing],tracesSampleRate:1}),o.a.render(r.a.createElement(i.a,{store:Object(W.e)(bt,Et(Object(W.a)(ot.a)))},r.a.createElement(ht,null,r.a.createElement(at,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/blog",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/blog","/service-worker.js");rt?(!function(e,t){fetch(e).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):ct(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):ct(t,e)}))}}()}},[[214,1,2]]]);
//# sourceMappingURL=main.1d45d5c6.chunk.js.map